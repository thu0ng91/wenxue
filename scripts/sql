ALTER table pre_comments add username varchar(255) not null comment '用户名';
ALTER table pre_comments add email varchar(255) not null comment '邮箱';

DROP TABLE IF EXISTS `pre_favorites`;
CREATE TABLE `pre_favorites` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) unsigned NOT NULL,
  `logid` int(11) unsigned NOT NULL,
  `classify` char(32) NOT NULL,
  `ip` char(16) NOT NULL,
  `ipInfo` char(255) NOT NULL,
  `cTime` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER table pre_comments add ip varchar(16) not null comment 'IP';
ALTER table pre_comments add ipInfo varchar(255) not null comment 'IP信息';

DROP TABLE IF EXISTS `pre_feedback`;
CREATE TABLE `pre_feedback` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '意见反馈ID',
  `uid` int(10) unsigned NOT NULL COMMENT '作者ID',
  `contact` varchar(255) NOT NULL COMMENT '联系方式',
  `appinfo` varchar(255) NOT NULL COMMENT '软件信息',
  `sysinfo` varchar(255) NOT NULL COMMENT '系统信息',
  `content` varchar(255) NOT NULL COMMENT '意见内容',
  `type` varchar(8) NOT NULL COMMENT '软件类型',
  `ip` varchar(25) NOT NULL COMMENT 'IP',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  `status` tinyint(3) NOT NULL COMMENT '状态',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_zazhi`;
CREATE TABLE `pre_zazhi` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL COMMENT '作者ID',
  `title` varchar(255) NOT NULL COMMENT '标题',
  `content` text NOT NULL COMMENT '正文',
  `faceimg` int(10) NOT NULL COMMENT '封面图',
  `comments` int(10) NOT NULL COMMENT '评论数',
  `favorites` int(10) unsigned NOT NULL COMMENT '收藏数',
  `top` tinyint(1) NOT NULL COMMENT '是否置顶',
  `hits` int(11) NOT NULL COMMENT '阅读数',
  `status` tinyint(1) NOT NULL,
  `cTime` int(11) NOT NULL COMMENT '创建世界',
  `updateTime` int(11) NOT NULL COMMENT '最近更新时间',
  PRIMARY KEY (`id`),
  KEY `uid` (`uid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_posts add zazhi int(10) not null COMMENT '所属杂志';
alter table pre_posts add `order` int(10) not null COMMENT '文章顺序';

DROP TABLE IF EXISTS `pre_videos`;
CREATE TABLE `pre_videos` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) unsigned NOT NULL COMMENT '作者',
  `logid` int(11) NOT NULL COMMENT '内容ID',
  `classify` varchar(16) NOT NULL COMMENT '分类',
  `title` varchar(255) NOT NULL COMMENT '标题',
  `content` varchar(255) NOT NULL COMMENT '描述',
  `url` varchar(255) NOT NULL COMMENT '链接地址',
  `swfurl` varchar(255) NOT NULL COMMENT 'FLASH视频地址',
  `h5url` varchar(255) NOT NULL COMMENT 'H5视频地址',
  `company` varchar(255) NOT NULL COMMENT '来源',
  `videoid` varchar(255) NOT NULL COMMENT '视频ID',
  `faceimg` varchar(255) NOT NULL COMMENT '封面图',
  `status` tinyint(1) NOT NULL,
  `cTime` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_users add ip varchar(16) not null COMMENT '注册IP';
alter table pre_users add cTime int(10) not null COMMENT '注册时间';
alter table pre_posts add  tinyint(1) not null COMMENT '是否是封面图';

DROP TABLE IF EXISTS `pre_chapters`;
CREATE TABLE `pre_chapters` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户',
  `aid` int(10) unsigned NOT NULL COMMENT '作者ID',
  `bid` int(10) unsigned NOT NULL COMMENT '所属小说ID',
  `title` varchar(255) NOT NULL COMMENT '标题',
  `content` text NOT NULL COMMENT '正文',
  `words` int(10) unsigned NOT NULL COMMENT '字数',
  `comments` int(10) unsigned NOT NULL COMMENT '评论数',
  `hits` int(10) unsigned NOT NULL COMMENT '点击数',
  `status` tinyint(1) unsigned NOT NULL COMMENT '状态',
  `vip` tinyint(1) unsigned NOT NULL COMMENT '是否VIP',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  `updateTime` int(10) unsigned NOT NULL COMMENT '更新时间',
  `postTime` int(10) unsigned NOT NULL COMMENT '发布时间',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_users add authorId int(10) unsigned not null COMMENT '作者ID';

DROP TABLE IF EXISTS `pre_tips`;
CREATE TABLE `pre_tips` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) unsigned NOT NULL COMMENT '用户ID',
  `logid` int(11) unsigned NOT NULL COMMENT '对象ID',
  `classify` char(16) NOT NULL COMMENT '对象分类',
  `tocommentid` int(11) unsigned NOT NULL COMMENT '评论ID',
  `content` varchar(1024) NOT NULL COMMENT '内容',
  `platform` char(16) NOT NULL COMMENT '来源',  
  `score` tinyint(1) unsigned NOT NULL COMMENT '评分', 
  `favors` int(10) unsigned NOT NULL COMMENT '点赞数', 
  `status` tinyint(1) NOT NULL COMMENT '状态',
  `cTime` int(11) unsigned NOT NULL COMMENT '创建时间',  
  `ip` varchar(16) NOT NULL COMMENT 'IP',
  `ipInfo` varchar(255) NOT NULL COMMENT 'IP信息',
  PRIMARY KEY (`id`),
  KEY `logid` (`logid`,`classify`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_users add cTime int(10) unsigned not null COMMENT '创建时间';
alter table pre_users add ip int(10) not null COMMENT '注册IP';
alter table pre_users add favors int(10) not null COMMENT '粉丝数';
alter table pre_users add favord int(10) not null COMMENT '关注了';
alter table pre_users add favorAuthors int(10) not null COMMENT '关注作者数';

alter table pre_books add score char(3) not null COMMENT '总评分';
alter table pre_books add scorer int(10) unsigned not null COMMENT '总评分人数';
alter table pre_books add score1 int(10) unsigned not null COMMENT '评1分';
alter table pre_books add score2 int(10) unsigned not null COMMENT '评2分';
alter table pre_books add score3 int(10) unsigned not null COMMENT '评3分';
alter table pre_books add score4 int(10) unsigned not null COMMENT '评4分';
alter table pre_books add score5 int(10) unsigned not null COMMENT '评5分';

alter table pre_chapters add postscript varchar(255) not null COMMENT '还想说';
alter table pre_chapters add psPosition tinyint(1) unsigned not null COMMENT '位置';

DROP TABLE IF EXISTS `pre_showcases`;
CREATE TABLE `pre_showcases` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '创建人ID',
  `columnid` int(10) unsigned NOT NULL COMMENT '所属栏目',
  `title` char(16) NOT NULL COMMENT '标题',
  `position` char(16) NOT NULL COMMENT '位置',  
  `display` char(16) NOT NULL COMMENT '展示方式',  
  `num` tinyint(3) unsigned NOT NULL COMMENT '条数', 
  `status` tinyint(1) NOT NULL COMMENT '状态',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间', 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_showcase_link`;
CREATE TABLE `pre_showcase_link` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `sid` int(10) unsigned NOT NULL COMMENT '创建人ID',
  `logid` int(10) unsigned NOT NULL COMMENT '创建人ID',
  `classify` char(16) NOT NULL COMMENT '标题',
  `title` varchar(255) NOT NULL COMMENT '展示方式',  
  `faceimg` varchar(255) NOT NULL COMMENT '位置',  
  `content` varchar(255) NOT NULL COMMENT '展示方式',
  `url` varchar(255) NOT NULL COMMENT '展示方式',  
  `status` tinyint(1) NOT NULL COMMENT '状态',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间', 
  `startTime` int(10) unsigned NOT NULL COMMENT '开始时间', 
  `endTime` int(10) unsigned NOT NULL COMMENT '结束时间', 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_tips add bid int(10) unsigned not null COMMENT '所属小说';
alter table pre_posts add aid int(10) unsigned not null COMMENT '作者ID';
alter table pre_authors add skinUrl varchar(255) not null COMMENT '皮肤图片地址';

DROP TABLE IF EXISTS `pre_drafts`;
CREATE TABLE `pre_drafts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户',
  `aid` int(10) unsigned NOT NULL COMMENT '作者ID',
  `bid` int(10) unsigned NOT NULL COMMENT '所属小说ID',
  `uuid` char(8) NOT NULL COMMENT '草稿随机ID',
  `title` varchar(255) NOT NULL COMMENT '标题',
  `content` text NOT NULL COMMENT '正文',
  `cTime` int(10) unsigned NOT NULL COMMENT '保存时间', 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter table pre_users add phone char(11) COMMENT '手机号';
alter table pre_users add phoneChecked tinyint(1) unsigned not null COMMENT '手机号是否已验证';

DROP TABLE IF EXISTS `pre_reports`;
CREATE TABLE `pre_reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL,
  `logid` int(11) NOT NULL,
  `classify` varchar(255) NOT NULL,
  `ip` varchar(15) NOT NULL,
  `desc` varchar(255) NOT NULL,
  `url` varchar(255) NOT NULL,
  `status` tinyint(1) NOT NULL,
  `cTime` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

alter table pre_reports add contact varchar(255) not null COMMENT '联系方式';
alter table pre_reports add times int(10) unsigned not null COMMENT '举报次数';

alter table pre_books add shoufa tinyint(1) unsigned not null COMMENT '是否首发';
alter table pre_books add iAgree char(3) not null COMMENT '同意协议';

alter table pre_posts add styleStatus tinyint(1) unsigned not null COMMENT '显示状态';
alter table pre_posts add open tinyint(1) unsigned not null COMMENT '是否允许评论';

alter table pre_tips add comments int(10) unsigned not null COMMENT '评论数';
alter table pre_words add status tinyint(1) unsigned not null COMMENT '状态';
alter table pre_chapters add chapterNum smallint(6) unsigned not null COMMENT '章节号';
alter table pre_comments add aid int(10) unsigned not null COMMENT '作者ID';

alter table pre_users add email varchar(255) not null COMMENT '邮箱';

alter table pre_chapters add chapterStatus tinyint(1) unsigned not null COMMENT '状态';
update pre_chapters set chapterStatus=status;
update pre_chapters set status=1;
