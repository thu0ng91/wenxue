DROP TABLE IF EXISTS `pre_group`;
CREATE TABLE `pre_group` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(50) NOT NULL COMMENT '标题',
  `faceImg` varchar(255) NOT NULL COMMENT '封面图',
  `desc` varchar(255) NOT NULL COMMENT '描述',
  `tasks` int(10) unsigned NOT NULL COMMENT '任务数',
  `members` int(10) unsigned NOT NULL COMMENT '成员数',
  `status` tinyint(1) NOT NULL COMMENT '状态',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_power_types`;
CREATE TABLE `pre_group_power_types` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `key` varchar(16) NOT NULL COMMENT '权限',
  `desc` varchar(255) NOT NULL COMMENT '描述',  
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_group_powers`;
CREATE TABLE `pre_group_powers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `gid` int(10) unsigned NOT NULL COMMENT '团队ID',
  `tid` int(10) unsigned NOT NULL COMMENT '权限ID',
  `value` tinyint(3) unsigned NOT NULL COMMENT '权限值',
  `score` int(10)  NOT NULL COMMENT '积分值',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_group_tasks`;
CREATE TABLE `pre_group_tasks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `gid` int(10) unsigned NOT NULL COMMENT '团队ID',
  `tid` int(10) unsigned NOT NULL COMMENT '权限ID',  
  `action` varchar(16) NOT NULL COMMENT '操作标识',
  `type` tinyint(1) unsigned NOT NULL COMMENT '类型，一次性还是重复性任务',
  `continuous` tinyint(1) unsigned NOT NULL COMMENT '不可中断',
  `num` tinyint(3) unsigned NOT NULL COMMENT '每天次数',
  `score` int(10) unsigned NOT NULL COMMENT '奖励积分',
  `startTime` int(10) unsigned NOT NULL COMMENT '任务数',
  `endTime` int(10) unsigned NOT NULL COMMENT '任务数',  
  `times` int(10) unsigned NOT NULL COMMENT '参与人数',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_task`;
CREATE TABLE `pre_task` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(50) NOT NULL COMMENT '标题',
  `faceImg` varchar(255) NOT NULL COMMENT '封面图',
  `desc` varchar(255) NOT NULL COMMENT '描述',
  `action` varchar(16) NOT NULL COMMENT '操作标识',  
  `times` int(10) unsigned NOT NULL COMMENT '参与人数',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `pre_task_logs`;
CREATE TABLE `pre_task_logs` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',
  `tid` int(10) unsigned NOT NULL COMMENT '任务ID',  
  `times` tinyint(3) unsigned NOT NULL COMMENT '参与次数',
  `cTime` int(10) unsigned NOT NULL COMMENT '参与时间',
  `status` tinyint(1) NOT NULL COMMENT '状态，是否已达成',
  `score` int(10) unsigned NOT NULL COMMENT '奖励积分',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_task_records`;
CREATE TABLE `pre_task_records` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',
  `tid` int(10) unsigned NOT NULL COMMENT '任务ID',    
  `cTime` int(10) unsigned NOT NULL COMMENT '参与时间',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_score_logs`;
CREATE TABLE `pre_score_logs` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',
  `classify` varchar(16) NOT NULL COMMENT '分类',
  `logid` int(10) unsigned NOT NULL COMMENT '对象ID',  
  `score` int(10) NOT NULL COMMENT '积分',
  `cTime` int(10) unsigned NOT NULL COMMENT '参与时间',  
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_users add groupid int(10) UNSIGNED not null COMMENT '所属团队ID';


DROP TABLE IF EXISTS `pre_post_forums`;
CREATE TABLE `pre_post_forums` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(16) NOT NULL COMMENT '标题',
  `desc` varchar(255) NOT NULL COMMENT '描述',
  `faceImg` varchar(255) NOT NULL COMMENT '封面图',
  `posts` int(10) unsigned NOT NULL COMMENT '作品数',  
  `favors` int(10) unsigned NOT NULL COMMENT '关注数', 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
alter TABLE pre_posts add forumid int(10) UNSIGNED not null COMMENT '所属版块ID';


DROP TABLE IF EXISTS pre_post_threads;
CREATE TABLE pre_post_threads (
  id int(10) unsigned NOT NULL AUTO_INCREMENT,
  fid int(10) unsigned NOT NULL COMMENT '所属版块',  
  type int(10) unsigned NOT NULL COMMENT '文章分类',
  uid int(10) unsigned NOT NULL COMMENT '作者',
  title char(80) NOT NULL COMMENT '标题',
  faceImg char(255) NOT NULL COMMENT '封面图',
  
  hits int(10) unsigned NOT NULL COMMENT '点击',
  posts int(10) unsigned NOT NULL COMMENT '楼层数',
  comments int(10) unsigned NOT NULL COMMENT '评论数',
  favorites int(10) unsigned NOT NULL COMMENT '收藏数',  

  styleStatus tinyint(1) NOT NULL COMMENT '显示状态',
  digest tinyint(1) NOT NULL COMMENT '是否加精',
  `top` tinyint(1) NOT NULL COMMENT '是否置顶',
  `open` tinyint(1) NOT NULL COMMENT '是否开放回复',
  `display` tinyint(1) NOT NULL COMMENT '是否倒序',
  
  lastpost int(10) unsigned NOT NULL COMMENT '最后回帖时间',
  lastposter int(10) unsigned NOT NULL COMMENT '最后回帖人',
  cTime int(10) unsigned NOT NULL COMMENT '发布时间',
  PRIMARY KEY (id)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `pre_post_posts`;
CREATE TABLE `pre_post_posts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL COMMENT '作者ID',  
  `aid` int(10) unsigned NOT NULL COMMENT '作者ID',
  `tid` int(10) unsigned NOT NULL COMMENT '帖子ID',
  `content` text NOT NULL COMMENT '正文',
  `comments` int(10) NOT NULL COMMENT '评论数',
  `favors` int(11) unsigned NOT NULL COMMENT '点赞数',    
  `cTime` int(11) NOT NULL COMMENT '创建时间',
  `updateTime` int(11) NOT NULL COMMENT '最近更新时间',  
  `open` tinyint(1) unsigned NOT NULL COMMENT '是否允许评论',
  `status` tinyint(1) NOT NULL COMMENT '楼层状态',
  PRIMARY KEY (`id`),
  KEY `uid` (`uid`),
  KEY `tid` (`tid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_post_threads add status tinyint(1) UNSIGNED not null COMMENT '帖子状态';
alter TABLE pre_post_posts add isFirst tinyint(1) UNSIGNED not null COMMENT '是否首贴';
alter TABLE pre_post_posts add platform tinyint(1) UNSIGNED not null COMMENT '来源';

alter TABLE pre_post_threads add aid int(10) UNSIGNED not null COMMENT '作者ID';


alter TABLE pre_user_action add action varchar(16) not null COMMENT '操作';
alter TABLE pre_user_action add score int(10) not null COMMENT '积分';
alter TABLE pre_user_action add display tinyint(1) unsigned not null COMMENT '是否显示';
update pre_user_action set display=1;

alter TABLE pre_task_logs add finishTime int(10) unsigned not null COMMENT '完成时间';


alter TABLE pre_group_tasks add days int(10) unsigned not null COMMENT '总天数';




DROP TABLE IF EXISTS `pre_orders`;
CREATE TABLE `pre_orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '关系ID',
  `orderId` char(32) NOT NULL COMMENT '订单号',
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',  

  `gid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `title` varchar(255) NOT NULL COMMENT '标题',
  `desc` varchar(255) NOT NULL COMMENT '描述',  
  `faceUrl` varchar(255) NOT NULL COMMENT '封面地址',  
  `classify` varchar(255) NOT NULL COMMENT '分类信息',  
  `content` text NOT NULL COMMENT '商品介绍',
  `scorePrice` varchar(16) NOT NULL COMMENT '积分价格',
  `goldPrice` varchar(16) NOT NULL COMMENT '金币价格',
  `num` int(10) unsigned NOT NULL COMMENT '总量',
  `payAction` varchar(16) NOT NULL COMMENT '购买方式，积分还是金币',

  `orderStatus` tinyint(3) unsigned NOT NULL COMMENT '订单状态',
  `status` tinyint(3) unsigned NOT NULL COMMENT '状态',
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  `paidTime` int(10) unsigned NOT NULL COMMENT '支付时间',
  `paidOrderId` varchar(255) NOT NULL COMMENT '支付订单号',
  `paidType` varchar(16) NOT NULL COMMENT '支付方式',

  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;



DROP TABLE IF EXISTS `pre_goods_classify`;
CREATE TABLE `pre_goods_classify` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '分类ID',
  `belongid` int(10) unsigned NOT NULL COMMENT '所属分类',
  `title` char(32) NOT NULL COMMENT '分类标题',
  `order` int(10) unsigned NOT NULL COMMENT '排序',
  `goods` int(10) unsigned NOT NULL COMMENT '商品数',
  `level` tinyint(1) unsigned NOT NULL COMMENT '层级',
  PRIMARY KEY (`id`),
  KEY `belongid` (`belongid`)
) ENGINE=MyISAM AUTO_INCREMENT=26 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `pre_goods`;
CREATE TABLE `pre_goods` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '商品ID',
  `title` char(32) NOT NULL COMMENT '分类标题',
  `desc` varchar(255) NOT NULL COMMENT '描述',
  `scorePrice` varchar(16) NOT NULL COMMENT '积分价格',
  `goldPrice` varchar(16) NOT NULL COMMENT '金币价格',
  `content` int(10) unsigned NOT NULL COMMENT '商品描述',
  `classify` int(10) unsigned NOT NULL COMMENT '分类ID',
  `comments` int(10) unsigned NOT NULL COMMENT '评论数',
  `hits` int(10) unsigned NOT NULL COMMENT '点击数',
  `score` varchar(4) NOT NULL COMMENT '评分',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `pre_goods_content`;
CREATE TABLE `pre_goods_content` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '商品ID',
  `gid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `content` text NOT NULL COMMENT '商品描述',  
  `cTime` int(10) unsigned NOT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`),
  KEY `gid` (`gid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_goods add groupids varchar(255) not null COMMENT '所属团队';

DROP TABLE IF EXISTS `pre_goods_group`;
CREATE TABLE `pre_goods_group` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `goodsId` int(10) unsigned NOT NULL COMMENT '商品ID',
  `groupId` int(10) unsigned NOT NULL COMMENT '团队ID',
  PRIMARY KEY (`id`),
  KEY `goodsId` (`goodsId`),
  KEY `groupId` (`groupId`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_goods add faceimg int(10) unsigned not null COMMENT '封面图ID';
alter TABLE pre_goods add faceUrl varchar(255) not null COMMENT '封面图';

DROP TABLE IF EXISTS `pre_goods_action`;
CREATE TABLE `pre_goods_action` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `gid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `classify` varchar(16) NOT NULL COMMENT '分类，如道具',
  `action` varchar(16) NOT NULL COMMENT '操作，如转换卡',
  `from` varchar(16) NOT NULL COMMENT '起始值',
  `to` varchar(16) NOT NULL COMMENT '结束值',
  PRIMARY KEY (`id`),
  KEY `gid` (`gid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_goods add actionId varchar(255) not null COMMENT '关联ID';

alter TABLE pre_users add score varchar(16) not null COMMENT '总积分';
alter TABLE pre_users add gold varchar(16) not null COMMENT '总金币';

DROP TABLE IF EXISTS `pre_props`;
CREATE TABLE `pre_props` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',
  `gid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `classify` varchar(16) NOT NULL COMMENT '分类，如道具',
  `action` varchar(16) NOT NULL COMMENT '操作，如转换卡',
  `from` varchar(16) NOT NULL COMMENT '起始值',
  `to` varchar(16) NOT NULL COMMENT '结束值',
  `num` int(10) unsigned NOT NULL COMMENT '数量',
  `updateTime` int(10) unsigned NOT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  KEY `gid` (`gid`),
  KEY `where` (`classify`,`action`,`uid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_orders add totalPrice varchar(16) not null COMMENT '总价';

DROP TABLE IF EXISTS `pre_prop_relation`;
CREATE TABLE `pre_prop_relation` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户',
  `touid` int(10) unsigned NOT NULL COMMENT '接收者',
  `pid` int(10) unsigned NOT NULL COMMENT '道具ID',
  `classify` varchar(16) NOT NULL COMMENT '分类，如帖子',
  `logid` int(10) unsigned NOT NULL COMMENT '对象ID',
  `num` int(10) unsigned NOT NULL COMMENT '使用数量',
  `updateTime` int(10) unsigned NOT NULL COMMENT '最近更新时间',
  PRIMARY KEY (`id`),
  KEY `zmf` (`uid`,`pid`,`classify`,`logid`),
  KEY `pid` (`pid`),
  KEY `uid` (`uid`),
  KEY `touid` (`touid`),
  KEY `order` (`num`,`updateTime`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_post_posts add props int(10) unsigned not null COMMENT '赞赏数';
alter TABLE pre_post_threads add props int(10) unsigned not null COMMENT '赞赏数';
alter TABLE pre_tips add props int(10) unsigned not null COMMENT '赞赏数';
alter TABLE pre_chapters add props int(10) unsigned not null COMMENT '赞赏数';
alter TABLE pre_books add props int(10) unsigned not null COMMENT '赞赏数';

alter TABLE pre_goods add limitNum int(10) unsigned not null COMMENT '限制每人购买次数';
alter TABLE pre_goods add totalNum int(10) unsigned not null COMMENT '总数量';
alter TABLE pre_goods add topTime int(10) unsigned not null COMMENT '推荐';

alter TABLE pre_group_powers add exp int(10) unsigned not null COMMENT '经验值';

DROP TABLE IF EXISTS `pre_group_levels`;
CREATE TABLE `pre_group_levels` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `gid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `minExp` int(10) unsigned NOT NULL COMMENT '用户ID',
  `maxExp` int(10) unsigned NOT NULL COMMENT '用户ID',  
  `title` varchar(16) NOT NULL COMMENT '分类，如道具',
  `desc` varchar(16) NOT NULL COMMENT '操作，如转换卡',
  `icon` varchar(255) NOT NULL COMMENT '起始值',  
  PRIMARY KEY (`id`),
  KEY `gid` (`gid`),
  KEY `where` (`minExp`,`maxExp`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_users add exp int(10) unsigned not null COMMENT '经验值';
alter TABLE pre_users add level int(10) unsigned not null COMMENT '经验ID';

alter TABLE pre_user_action add exp int(10) not null COMMENT '经验值';
alter TABLE pre_users add levelTitle varchar(16) not null COMMENT '等级';
alter TABLE pre_users add levelIcon varchar(255) not null COMMENT '等级图标';

alter TABLE pre_group add initScore int(10) unsigned not null COMMENT '初始化积分';
alter TABLE pre_group add initExp int(10) unsigned not null COMMENT '初始化经验';

DROP TABLE IF EXISTS `pre_group_gifts`;
CREATE TABLE `pre_group_gifts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `groupid` int(10) unsigned NOT NULL COMMENT '用户组ID',
  `goodsid` int(10) unsigned NOT NULL COMMENT '商品ID',
  `num` smallint(8) unsigned NOT NULL COMMENT '赠送数量',  
  PRIMARY KEY (`id`),
  KEY `groupid` (`groupid`),
  KEY `goodsid` (`goodsid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_group_tasks add exp int(10) unsigned not null COMMENT '经验奖励';
alter TABLE pre_task_logs add exp int(10) unsigned not null COMMENT '经验奖励';
alter TABLE pre_score_logs add exp int(10) unsigned not null COMMENT '经验奖励';

DROP TABLE IF EXISTS `pre_forum_admins`;
CREATE TABLE `pre_forum_admins` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `fid` int(10) unsigned NOT NULL COMMENT '版块ID',
  `uid` int(10) unsigned NOT NULL COMMENT '用户ID',
  `num` smallint(8) unsigned NOT NULL COMMENT '发帖数量',
  `powers` MEDIUMTEXT NOT NULL COMMENT '版主权限',
  PRIMARY KEY (`id`),
  KEY `fid` (`fid`),
  KEY `uid` (`uid`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

alter TABLE pre_group_powers add totalLimit tinyint(1) unsigned not null COMMENT '总数限制';
alter TABLE pre_group_powers add display tinyint(1) unsigned not null COMMENT '是否在动态里显示';

alter TABLE pre_group add isAuthor tinyint(1) unsigned not null COMMENT '是否必须注册为作者';

alter TABLE pre_post_threads add posterType char(6) not null COMMENT '发帖者类别';
alter TABLE pre_post_forums add posterType char(6) not null COMMENT '发帖者类别';

alter TABLE pre_post_threads add postExpiredTime int(10) unsigned not null COMMENT '投稿结束时间';
alter TABLE pre_post_threads add voteExpiredTime int(10) unsigned not null COMMENT '投票结束时间';